<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Wizard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>
</head>
<body class="bg-light py-5">
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-primary text-white">Form Wizard</div>
                <div class="card-body">
                    <form id="form-wizard" action="{{ url_for('index') }}" method="post">
                        <div class="mb-3">
                            <label for="zip_code" class="form-label">Zip Code:</label>
                            <input type="text" class="form-control" id="zip_code" name="zip_code" required>
                        </div>

                        <div class="mb-3">
                            <label for="sanctuary_city" class="form-label">Do you support the current sanctuary city policies in California?</label>
                            <select class="form-control" id="sanctuary_city" name="sanctuary_city">
                                <option>Yes</option>
                                <option>No</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="tax_rates" class="form-label">How do you feel about the current tax rates in California?</label>
                            <select class="form-control" id="tax_rates" name="tax_rates">
                                <option>Much too low</option>
                                <option>Slightly too low</option>
                                <option>About right</option>
                                <option>Slightly too high</option>
                                <option>Much too high</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="public_transportation" class="form-label">Do you think the state should spend more or less money on public transportation infrastructure?</label>
                            <select class="form-control" id="public_transportation" name="public_transportation">
                                <option>More</option>
                                <option>Less</option>
                                <option>About the same</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="housing_affordability" class="form-label">Do you support building more market-rate housing in your city to address housing affordability?</label>
                            <select class="form-control" id="housing_affordability" name="housing_affordability">
                                <option>Yes</option>
                                <option>No</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="homelessness" class="form-label">How serious of an issue do you think homelessness is in your local community?</label>
                            <select class="form-control" id="homelessness" name="homelessness">
                                <option>Not serious</option>
                                <option>Slightly serious</option>
                                <option>Moderately serious</option>
                                <option>Very serious</option>
                                <option>Extremely serious</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="police_department" class="form-label">Do you approve or disapprove of how your city's local police department operates?</label>
                            <select class="form-control" id="police_department" name="police_department">
                                <option>Approve</option>
                                <option>Disapprove</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="drilling_restrictions" class="form-label">Do you support the current restrictions on drilling new oil and gas wells in the state?</label>
                            <select class="form-control" id="drilling_restrictions" name="drilling_restrictions">
                                <option>Yes</option>
                                <option>No</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="gasoline_taxes" class="form-label">Do you think taxes and fees on gasoline should be increased to fund clean transportation initiatives?</label>
                            <select class="form-control" id="gasoline_taxes" name="gasoline_taxes">
                                <option>Yes</option>
                                <option>No</option>
                            </select>
                        </div>

                        <button type="submit" class="btn btn-primary">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    $(document).ready(function() {
        $('#form-wizard').on('submit', function(event) {
            event.preventDefault();

            // Ajax POST request
            $.ajax({
                type: "POST",
                url: "{{ url_for('results') }}",
                data: $(this).serialize(),
                dataType: "json",
                success: function(response) {
                    console.log(response);  // This logs the form data in the console

                    // You can now use the response object to manipulate the DOM or perform other tasks
                    alert("Data saved successfully!");
                },
                error: function(error) {
                    console.log(error);
                    alert("An error occurred!");
                }
            });
        });
    });
</script>

</body>
</html>
